<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="/lib/pace/pace-theme-minimal.min.css">
  <script src="/lib/pace/pace.min.js"></script>

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"kaijie.tech","root":"/","scheme":"Gemini","version":"7.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":"ture","show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="本文主要讲解了：数据库的基本概念、MySQL基础（包括如何操作数据库、表、增删改查表中的数据、管理用户及授权）、MySQL约束（非空约束、唯一约束、主键约束、外键约束）、数据库的设计（多表之间的关系、数据库中的范式）、数据库的备份和还原、多表查询（内查询、外查询和子查询）以及事务（事务的基本介绍和事务的隔离级别）等内容。">
<meta property="og:type" content="article">
<meta property="og:title" content="MySQL学习">
<meta property="og:url" content="http://kaijie.tech/2020/02/23/MySQL%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="Kaijie&#39;s Blog">
<meta property="og:description" content="本文主要讲解了：数据库的基本概念、MySQL基础（包括如何操作数据库、表、增删改查表中的数据、管理用户及授权）、MySQL约束（非空约束、唯一约束、主键约束、外键约束）、数据库的设计（多表之间的关系、数据库中的范式）、数据库的备份和还原、多表查询（内查询、外查询和子查询）以及事务（事务的基本介绍和事务的隔离级别）等内容。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://kaijie.tech/images/MySQL%E5%AD%A6%E4%B9%A0/Snipaste_2020-02-23_21-49-07.png">
<meta property="og:image" content="http://kaijie.tech/images/MySQL%E5%AD%A6%E4%B9%A0/Snipaste_2020-02-24_18-55-06.png">
<meta property="og:image" content="http://kaijie.tech/images/MySQL%E5%AD%A6%E4%B9%A0/Snipaste_2020-02-25_12-36-45.png">
<meta property="og:image" content="http://kaijie.tech/images/MySQL%E5%AD%A6%E4%B9%A0/Snipaste_2020-02-25_12-36-34.png">
<meta property="og:image" content="http://kaijie.tech/images/MySQL%E5%AD%A6%E4%B9%A0/Snipaste_2020-02-25_12-36-23.png">
<meta property="og:image" content="http://kaijie.tech/images/MySQL%E5%AD%A6%E4%B9%A0/Snipaste_2020-02-25_12-24-19.png">
<meta property="og:image" content="http://kaijie.tech/images/MySQL%E5%AD%A6%E4%B9%A0/Snipaste_2020-02-25_12-24-30.png">
<meta property="og:image" content="http://kaijie.tech/images/MySQL%E5%AD%A6%E4%B9%A0/Snipaste_2020-02-25_12-26-07.png">
<meta property="og:image" content="http://kaijie.tech/images/MySQL%E5%AD%A6%E4%B9%A0/Snipaste_2020-02-25_12-26-19.png">
<meta property="article:published_time" content="2020-02-23T12:52:33.000Z">
<meta property="article:modified_time" content="2020-02-27T12:52:41.795Z">
<meta property="article:author" content="Kaijie">
<meta property="article:tag" content="MySQL基础">
<meta property="article:tag" content="MySQL约束">
<meta property="article:tag" content="数据库的设计">
<meta property="article:tag" content="数据的备份和还原">
<meta property="article:tag" content="多表查询">
<meta property="article:tag" content="事务">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://kaijie.tech/images/MySQL%E5%AD%A6%E4%B9%A0/Snipaste_2020-02-23_21-49-07.png">

<link rel="canonical" href="http://kaijie.tech/2020/02/23/MySQL%E5%AD%A6%E4%B9%A0/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>MySQL学习 | Kaijie's Blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<link rel="alternate" href="/atom.xml" title="Kaijie's Blog" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Kaijie's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
  </div>

  <div class="site-nav-right"></div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
        <li class="menu-item menu-item-top">

    <a href="/top/" rel="section"><i class="fa fa-fw fa-signal"></i>阅读排行</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://kaijie.tech/2020/02/23/MySQL%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Kaijie">
      <meta itemprop="description" content="我的个人博客">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Kaijie's Blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MySQL学习
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-02-23 20:52:33" itemprop="dateCreated datePublished" datetime="2020-02-23T20:52:33+08:00">2020-02-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-02-27 20:52:41" itemprop="dateModified" datetime="2020-02-27T20:52:41+08:00">2020-02-27</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%AD%A6%E4%B9%A0-MySQL%E5%AD%A6%E4%B9%A0/" itemprop="url" rel="index">
                    <span itemprop="name">数据库学习 - MySQL学习</span>
                  </a>
                </span>
            </span>

          
            <span id="/2020/02/23/MySQL%E5%AD%A6%E4%B9%A0/" class="post-meta-item leancloud_visitors" data-flag-title="MySQL学习" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="fa fa-comment-o"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2020/02/23/MySQL%E5%AD%A6%E4%B9%A0/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2020/02/23/MySQL%E5%AD%A6%E4%B9%A0/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="fa fa-file-word-o"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>21k</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="数据库的基本概念"><a href="#数据库的基本概念" class="headerlink" title="数据库的基本概念"></a>数据库的基本概念</h2><ol>
<li><p>数据库的英文单词： DataBase 简称 ： DB</p>
</li>
<li><p>什么数据库？<br> 用于存储和管理数据的仓库。</p>
</li>
<li><p>数据库的特点：</p>
<ul>
<li><strong>持久化存储数据</strong>的。其实数据库就是一个<strong>文件系统</strong></li>
<li>方便存储和管理数据</li>
<li>使用了统一的方式操作数据库 – SQL语言</li>
</ul>
</li>
<li><p>常见的数据库软件</p>
<ul>
<li>MySQL</li>
<li>Oracle    </li>
</ul>
</li>
</ol>
<h2 id="MySQL基础"><a href="#MySQL基础" class="headerlink" title="MySQL基础"></a>MySQL基础</h2><ol>
<li><p>什么是SQL？<br>Structured Query Language：<strong>结构化查询语言</strong>。其实就是定义了操作所有<strong>关系型数据库</strong>的规则。每一种数据库操作的方式存在不一样的地方，称为“方言”。</p>
</li>
<li><p>SQL通用语法</p>
<ul>
<li><p>SQL 语句可以单行或多行书写，以分号结尾。</p>
</li>
<li><p>可使用空格和缩进来增强语句的可读性。</p>
</li>
<li><p>MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写。</p>
</li>
</ul>
</li>
<li><p>3 种注释</p>
<ul>
<li><p>单行注释: – 注释内容（注意–后由一个空格）或 # 注释内容(mysql 特有) </p>
</li>
<li><p>多行注释: /* 注释 */</p>
</li>
</ul>
</li>
<li><p>SQL分类</p>
<ul>
<li><p>DDL(Data <strong>Definition</strong> Language)数据定义语言：用来定义数据库对象：<strong>数据库，表</strong>，列等。关键字：create, drop,alter 等</p>
</li>
<li><p>DML(Data <strong>Manipulation</strong> Language)数据操作语言：用来对数据库中表的<strong>数据进行增删改</strong>。关键字：insert, delete, update 等</p>
</li>
<li><p>DQL(Data <strong>Query</strong> Language)数据查询语言：用来<strong>查询</strong>数据库中表的记录<strong>(数据)</strong>。关键字：select, where 等</p>
</li>
<li><p>DCL(Data <strong>Control</strong> Language)数据控制语言(了解)：用来定义数据库的<strong>访问权限和安全级别</strong>，及创建用户。关键字：GRANT， REVOKE 等</p>
</li>
</ul>
</li>
</ol>
<p>四者关系如下图所示：</p>
<p><img src="/images/MySQL%E5%AD%A6%E4%B9%A0/Snipaste_2020-02-23_21-49-07.png" alt=""></p>
<h3 id="DDL-操作数据库、表"><a href="#DDL-操作数据库、表" class="headerlink" title="DDL:操作数据库、表"></a>DDL:操作数据库、表</h3><h4 id="操作数据库"><a href="#操作数据库" class="headerlink" title="操作数据库"></a>操作数据库</h4><h5 id="C-Create-创建"><a href="#C-Create-创建" class="headerlink" title="C(Create):创建"></a>C(Create):创建</h5><ul>
<li>创建数据库：<code>create database 数据库名称;</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE student (</span><br><span class="line">    id INT,</span><br><span class="line">    -- 编号</span><br><span class="line">    NAME VARCHAR(20), -- 姓名</span><br><span class="line">    age INT, -- 年龄</span><br><span class="line">    sex VARCHAR(5),</span><br><span class="line">    -- 性别</span><br><span class="line">    address VARCHAR(100),</span><br><span class="line">    -- 地址</span><br><span class="line">    math INT, -- 数学</span><br><span class="line">    english INT -- 英语</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ul>
<li><p>创建数据库，判断不存在，再创建：<code>create database if not exists 数据库名称;</code></p>
</li>
<li><p>创建数据库，并指定字符集: <code>create database 数据库名称 character set 字符集名;</code></p>
</li>
</ul>
<p>例如： 创建db4数据库，判断是否存在，并制定字符集为gbk。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database if not exists db4 character set gbk;</span><br></pre></td></tr></table></figure>

<h5 id="D-Delete-删除"><a href="#D-Delete-删除" class="headerlink" title="D(Delete):删除"></a>D(Delete):删除</h5><ul>
<li>删除数据库:<code>drop database 数据库名称;</code></li>
<li>判断数据库存在，存在再删除:<code>drop database if exists 数据库名称;</code></li>
</ul>
<h5 id="U-Update-修改"><a href="#U-Update-修改" class="headerlink" title="U(Update):修改"></a>U(Update):修改</h5><ul>
<li>修改数据库的字符集：<code>alter database 数据库名称 character set 字符集名称;</code></li>
</ul>
<h5 id="R-Retrieve-查询"><a href="#R-Retrieve-查询" class="headerlink" title="R(Retrieve):查询"></a>R(Retrieve):查询</h5><ul>
<li>查询所有数据库的名称：<code>show databases;</code></li>
<li>查询某个数据库的字符集（查询某个数据库的创建语句）：<code>show create database 数据库名称;</code></li>
</ul>
<h5 id="使用数据库"><a href="#使用数据库" class="headerlink" title="使用数据库"></a>使用数据库</h5><ul>
<li>查询当前正在使用的数据库名称:<code>select database();</code></li>
<li>使用数据库:<code>use 数据库名称;</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">    列名1 数据类型1,</span><br><span class="line">    列名2 数据类型2,</span><br><span class="line">    ....</span><br><span class="line">    列名n 数据类型n</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p><strong>注意：最后一列，不需要加逗号”,”</strong></p>
<h4 id="操作表"><a href="#操作表" class="headerlink" title="操作表"></a>操作表</h4><h5 id="C-Create-创建表"><a href="#C-Create-创建表" class="headerlink" title="C(Create)创建表"></a>C(Create)创建表</h5><p>常用数据库类型:</p>
<ul>
<li><p>int：整数类型</p>
</li>
<li><p>double:小数类型</p>
</li>
<li><p>date:日期，只包含年月日，yyyy-MM-dd</p>
</li>
<li><p>datetime:日期，包含年月日时分秒     yyyy-MM-dd HH:mm:ss</p>
</li>
<li><p>timestamp:时间戳类型,包含年月日时分秒,yyyy-MM-dd HH:mm:ss<br>如果将来不给这个字段赋值，或赋值为null，则默认使用当前的系统时间，来自动赋值</p>
</li>
<li><p>varchar：字符串。zhangsan 8个字符  张三 2个字符</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">create table student(</span><br><span class="line">    id int,</span><br><span class="line">    name varchar(32),</span><br><span class="line">    age int,</span><br><span class="line">    -- 表示这个数最多有4位，小数有1位。最大为999.9 </span><br><span class="line">    score double(4,1),</span><br><span class="line">    birthday date,</span><br><span class="line">    insert_time timestamp</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ul>
<li>复制表：<code>create table 表名 like 被复制的表名;</code></li>
</ul>
<p>详细数据库类型：</p>
<p><img src="/images/MySQL%E5%AD%A6%E4%B9%A0/Snipaste_2020-02-24_18-55-06.png" alt=""></p>
<h5 id="D-Delete-删除-1"><a href="#D-Delete-删除-1" class="headerlink" title="D(Delete):删除"></a>D(Delete):删除</h5><ul>
<li>drop table 表名;</li>
<li>drop table  if exists 表名;</li>
</ul>
<h5 id="U-Update-修改-1"><a href="#U-Update-修改-1" class="headerlink" title="U(Update):修改"></a>U(Update):修改</h5><ul>
<li>修改表名:<code>alter table 表名 rename to 新的表名;</code></li>
<li><ul>
<li>查询表的字符集:<code>show create table 表名;</code></li>
</ul>
</li>
<li>修改表的字符集: <code>alter table 表名 character 字符集名称;</code>,例如utf8，gbk等。</li>
<li>添加一列:<code>alter table 表名 add 列名 数据类型;</code></li>
<li>修改列名称,类型<ul>
<li>既改名字也改类型：<code>alter table 表名 change 列名 新列别 新数据类型;</code></li>
<li>只修改类型：<code>alter table 表名 modify 列名 新数据类型;</code></li>
</ul>
</li>
<li>删除列：<code>alter table 表名 drop 列名;</code></li>
</ul>
<h5 id="R-Retrieve-查询-1"><a href="#R-Retrieve-查询-1" class="headerlink" title="R(Retrieve):查询"></a>R(Retrieve):查询</h5><ul>
<li>查询某个数据库中所有的表名称:<code>show tables;</code></li>
<li>查询表结构：<code>desc 表名;</code></li>
</ul>
<h3 id="DML：增删改表中的数据"><a href="#DML：增删改表中的数据" class="headerlink" title="DML：增删改表中的数据"></a>DML：增删改表中的数据</h3><h4 id="添加数据"><a href="#添加数据" class="headerlink" title="添加数据"></a>添加数据</h4><p><code>insert into 表名(列名1,列名2,...列名n) values(值1,值2,...值n);</code></p>
<p>注意：<br>    1. 列名和值要一一对应。<br>    2. 如果表名后，不定义列名，则默认给所有列添加值（必须给所有字段赋值）<br>        <code>insert into 表名 values(值1,值2,...值n);</code><br>    3. 除了数字类型，其他类型（例如date等）需要使用引号(单双都可以)引起来<br>    4. 最后一个列名和值后面不加逗号</p>
<h4 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h4><p><code>delete from 表名 [where 条件];</code></p>
<p>注意：<br>    1. 如果不加条件，则删除表中所有记录。<br>    2. 如果要删除所有记录<br>    3. delete from 表名; – 不推荐使用。有多少条记录就会执行多少次删除操作<br>    4. TRUNCATE TABLE 表名; – 推荐使用，效率更高 先删除表(与drop不同，删除后会再创建一张一样的空表)。<br>    5. 中括号代表，语句里的where条件为可选项。</p>
<h4 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h4><p><code>update 表名 set 列名1 = 值1, 列名2 = 值2,... [where 条件];</code></p>
<p>注意：如果不加任何条件，则会将表中所有记录全部修改。</p>
<h3 id="DQL：查询表中的记录"><a href="#DQL：查询表中的记录" class="headerlink" title="DQL：查询表中的记录"></a>DQL：查询表中的记录</h3><p><code>select * from 表名;</code></p>
<p>语法：</p>
<ul>
<li>select<br>  字段列表(可以为多个字段)</li>
<li>from<br>  表名列表(可以为多个表)</li>
<li>where<br>  条件列表(可以为多个条件    )</li>
<li>group by<br>  分组字段</li>
<li>having<br>  分组之后的条件</li>
<li>order by<br>  排序</li>
<li>limit<br>  分页限定</li>
</ul>
<h4 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h4><ul>
<li><p>多个字段的查询:<br>  <code>select 字段名1，字段名2... from 表名；</code></p>
<p>  注意：如果查询所有字段，则可以使用*来替代字段列表。</p>
</li>
<li><p>去除重复：<br> <code>distinct（加到字段前面）</code></p>
</li>
<li><p>起别名：<code>as</code>,as也可以省略（跟到字段名后面）</p>
</li>
<li><p>计算列</p>
<ul>
<li>一般可以使用四则运算计算一些列的值。（一般只会进行数值型的计算），例如：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT math AS 数学, english AS 英语, math + english AS 总分	FROM student;</span><br></pre></td></tr></table></figure>

<ul>
<li>ifnull(表达式1,表达式2)：null参与的运算，计算结果都为null。表达式1：哪个字段        需要判断是否为null。如果该字段为null后的替换值。</li>
</ul>
</li>
</ul>
<h4 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h4><p><code>where子句后跟条件</code></p>
<p>运算符:</p>
<ul>
<li>&gt;、&lt; 、&lt;= 、&gt;= 、=(只有一个等号) 、&lt;&gt;(等价于!=)</li>
<li>BETWEEN…AND  </li>
<li>IN( 集合) </li>
<li>LIKE：模糊查询</li>
<li>占位符：</li>
<li>_:单个任意字符</li>
<li>%：多个任意字符</li>
<li>IS NULL  </li>
<li>and  或 &amp;&amp;</li>
<li>or  或 || </li>
<li>not  或 !</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">-- 查询年龄大于20岁</span><br><span class="line"></span><br><span class="line">SELECT * FROM student WHERE age &gt; 20;</span><br><span class="line"></span><br><span class="line">-- 查询年龄等于20岁,这里是一个等号</span><br><span class="line"></span><br><span class="line">SELECT * FROM student WHERE age &#x3D; 20;</span><br><span class="line"></span><br><span class="line">-- 查询年龄不等于20岁</span><br><span class="line"></span><br><span class="line">SELECT * FROM student WHERE age !&#x3D; 20;</span><br><span class="line">SELECT * FROM student WHERE age &lt;&gt; 20;</span><br><span class="line"></span><br><span class="line">-- 查询年龄大于等于20 小于等于30</span><br><span class="line"></span><br><span class="line">SELECT * FROM student WHERE age &gt;&#x3D; 20 &amp;&amp;  age &lt;&#x3D;30;</span><br><span class="line">SELECT * FROM student WHERE age &gt;&#x3D; 20 AND  age &lt;&#x3D;30;（**推荐使用AND，不推荐使用&amp;&amp;**）</span><br><span class="line">SELECT * FROM student WHERE age BETWEEN 20 AND 30;</span><br><span class="line"></span><br><span class="line">-- 查询年龄22岁，18岁，25岁的信息</span><br><span class="line"></span><br><span class="line">SELECT * FROM student WHERE age &#x3D; 22 OR age &#x3D; 18 OR age &#x3D; 25</span><br><span class="line">SELECT * FROM student WHERE age IN (22,18,25);</span><br><span class="line"></span><br><span class="line">-- 查询英语成绩为null</span><br><span class="line"></span><br><span class="line">SELECT * FROM student WHERE english &#x3D; NULL; -- 不对的。null值不能使用 &#x3D; （!&#x3D;） 判断</span><br><span class="line"></span><br><span class="line">SELECT * FROM student WHERE english IS NULL;</span><br><span class="line"></span><br><span class="line">-- 查询英语成绩不为null</span><br><span class="line"></span><br><span class="line">SELECT * FROM student WHERE english  IS NOT NULL;</span><br></pre></td></tr></table></figure>

<h4 id="like关键字"><a href="#like关键字" class="headerlink" title="like关键字"></a>like关键字</h4><p>占位符：</p>
<ul>
<li>下划线_：代表单个任意字符</li>
<li>百分号%：代表多个任意字符</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-- 查询姓马的有哪些？ like</span><br><span class="line"></span><br><span class="line">SELECT * FROM student WHERE NAME LIKE &#39;马%&#39;;</span><br><span class="line"></span><br><span class="line">-- 查询姓名第二个字是化的人</span><br><span class="line"></span><br><span class="line">SELECT * FROM student WHERE NAME LIKE &quot;_化%&quot;;</span><br><span class="line"></span><br><span class="line">-- 查询姓名是3个字的人</span><br><span class="line"></span><br><span class="line">SELECT * FROM student WHERE NAME LIKE &#39;___&#39;;</span><br><span class="line"></span><br><span class="line">-- 查询姓名中包含德的人</span><br><span class="line"></span><br><span class="line">SELECT * FROM student WHERE NAME LIKE &#39;%德%&#39;;</span><br></pre></td></tr></table></figure>

<ol>
<li>排序查询</li>
</ol>
<p>语法：order by 子句<br>    order by 排序字段1 排序方式1 ，  排序字段2 排序方式2…    </p>
<p>排序方式：</p>
<ul>
<li>ASC：升序，默认的。</li>
<li>DESC：降序。</li>
</ul>
<p><code>注意：如果有多个排序条件，则当前边的条件值一样时，才会判断第二条件</code>。</p>
<ol start="2">
<li>聚合函数：将一列数据作为一个整体，进行纵向的计算。</li>
</ol>
<p>语法：<br>    SELECT 聚合函数名字(列名) FROM 表名;</p>
<p>主要聚合函数：</p>
<ul>
<li>count：计算个数<ul>
<li>一般选择不包含非空的列：主键（推荐使用）</li>
<li>IFNULL函数，用IFNULL(列名, 0)</li>
<li>count(*)，代表一行中只要有一个不为空就算一条记录</li>
</ul>
</li>
<li>max：计算最大值</li>
<li>min：计算最小值</li>
<li>sum：计算和 </li>
<li>avg：计算平均值</li>
</ul>
<p>注意：聚合函数的计算，排除null值。<br>解决方案：<br>    - 一般选择不包含非空的列：主键（推荐使用）<br>    - IFNULL函数，用IFNULL(列名, 0)<br>    - count(*)，代表一行中只要有一个不为空就算一条记录    </p>
<h4 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h4><p>语法：group by 分组字段；</p>
<p>注意：</p>
<ul>
<li>分组之后查询的字段：分组字段、聚合函数</li>
</ul>
<p><strong>where 和 having 的区别？</strong></p>
<ul>
<li><p>where 在分组之前进行限定，如果不满足条件，则不参与分组。having在分组之后进行限定，如果不满足结果，则不会被查询出来</p>
</li>
<li><p>where 后不可以跟聚合函数，having可以进行聚合函数的判断。</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">-- 按照性别分组，分别查询男、女同学的平均分，人数</span><br><span class="line"></span><br><span class="line">SELECT sex, AVG(math), COUNT(id) FROM student GROUP BY sex;</span><br><span class="line"></span><br><span class="line">-- 按照性别分组，分别查询男、女同学的平均分，人数。要求：分数低于70分的人，不参与分组。 </span><br><span class="line"></span><br><span class="line">SELECT sex, AVG(math), COUNT(id) FROM student WHERE math &gt; 70 GROUP BY sex;</span><br><span class="line"></span><br><span class="line">-- 按照性别分组，分别查询男、女同学的平均分，人数。要求：分数低于70分的人，不参与分组,分组之后，人数要大于两个人。</span><br><span class="line"></span><br><span class="line">SELECT sex, AVG(math), COUNT(id) FROM student WHERE math &gt; 70 GROUP BY sex HAVING COUNT(id) &gt; 2;</span><br><span class="line"></span><br><span class="line">-- 使用as起别名操作，使语句更加明晰，其中AS可以省略</span><br><span class="line"></span><br><span class="line">SELECT sex , AVG(math),COUNT(id) AS 人数 FROM student WHERE math &gt; 70 GROUP BY sex HAVING 人数 &gt; 2;</span><br></pre></td></tr></table></figure>

<h4 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h4><p>语法：limit 开始的索引,每页查询的条数;</p>
<p><strong>公式：开始的索引 = （当前的页码 - 1） * 每页显示的条数</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 每页显示3条记录 </span><br><span class="line">SELECT * FROM student LIMIT 0,3; -- 第1页</span><br><span class="line">SELECT * FROM student LIMIT 3,3; -- 第2页			</span><br><span class="line">SELECT * FROM student LIMIT 6,3; -- 第3页</span><br></pre></td></tr></table></figure>

<p><strong>注意：limit 是一个MySQL”方言”，即是mysql特有的分页方式。</strong></p>
<h3 id="DCL：管理用户及授权"><a href="#DCL：管理用户及授权" class="headerlink" title="DCL：管理用户及授权"></a>DCL：管理用户及授权</h3><p>使用者一般为为DBA：数据库管理员。</p>
<h4 id="管理用户"><a href="#管理用户" class="headerlink" title="管理用户"></a>管理用户</h4><p>添加用户：</p>
<p>语法：CREATE USER ‘用户名‘@’主机名’ IDENTIFIED BY ‘密码’;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 举例</span><br><span class="line"></span><br><span class="line">CREATE USER &#39;zhangsan&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;123&#39;;</span><br><span class="line">CREATE USER &#39;lisi&#39;@&#39;%&#39; IDENTIFIED BY &#39;123&#39;;</span><br></pre></td></tr></table></figure>
<p><strong>注：通配符%，表示可以在任意主机使用用户登录数据库</strong>。</p>
<p>删除用户：</p>
<p>语法：DROP USER ‘用户名‘@’主机名’;</p>
<p>修改用户密码：</p>
<p>其中PASSWORD为一种加密函数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 第一种方式</span><br><span class="line">UPDATE USER SET PASSWORD &#x3D; PASSWORD(&#39;新密码&#39;) WHERE USER &#x3D; &#39;用户名&#39;;</span><br><span class="line">UPDATE USER SET PASSWORD &#x3D; PASSWORD(&#39;abc&#39;) WHERE USER &#x3D; &#39;lisi&#39;;</span><br><span class="line"></span><br><span class="line">-- 第二种方式</span><br><span class="line">SET PASSWORD FOR &#39;用户名&#39;@&#39;主机名&#39; &#x3D; PASSWORD(&#39;新密码&#39;);</span><br><span class="line">SET PASSWORD FOR &#39;root&#39;@&#39;localhost&#39; &#x3D; PASSWORD(&#39;123&#39;);</span><br></pre></td></tr></table></figure>

<p>查询用户：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 1. 切换到mysql数据库</span><br><span class="line">USE mysql;</span><br><span class="line"></span><br><span class="line">-- 2. 查询user表</span><br><span class="line">SELECT * FROM USER;</span><br></pre></td></tr></table></figure>

<h4 id="Windows中mysql中忘记了root用户的密码"><a href="#Windows中mysql中忘记了root用户的密码" class="headerlink" title="Windows中mysql中忘记了root用户的密码"></a>Windows中mysql中忘记了root用户的密码</h4><ol>
<li>cmd – &gt; net stop mysql 停止mysql服务。<strong>需要管理员运行该cmd</strong>。</li>
<li>使用无验证方式启动mysql服务。<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --skip-grant-tables</span><br></pre></td></tr></table></figure></li>
<li>打开新的cmd窗口,直接输入mysql命令，敲回车。就可以登录成功。</li>
<li>使用mysql数据库。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use mysql;</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>更新密码。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update user set password &#x3D; password(&#39;你的新密码&#39;) where user &#x3D; &#39;root&#39;;</span><br></pre></td></tr></table></figure>
<ol start="6">
<li>关闭两个窗口。</li>
<li>打开任务管理器，手动结束mysqld.exe 的进程。</li>
<li>启动mysql服务。</li>
<li>使用新密码登录。</li>
</ol>
<h4 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h4><p>查询权限：</p>
<p>语法：SHOW GRANTS FOR ‘用户名‘@’主机名’;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 查询权限</span><br><span class="line">SHOW GRANTS FOR &#39;lisi&#39;@&#39;%&#39;;</span><br></pre></td></tr></table></figure>

<p>授予权限：</p>
<p>例如：查看权限，修改权限等等。授予权限，多个权限用逗号隔开’,’。<br>语法：grant 权限列表 on 数据库名.表名 to ‘用户名‘@’主机名’;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 给张三用户授予所有权限，在任意数据库任意表上</span><br><span class="line">GRANT ALL ON *.* TO &#39;zhangsan&#39;@&#39;localhost&#39;;</span><br></pre></td></tr></table></figure>

<p>撤销权限：</p>
<p>语法：revoke 权限列表 on 数据库名.表名 from ‘用户名‘@’主机名’;</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 撤销权限</span><br><span class="line">REVOKE UPDATE ON db3.&#96;account&#96; FROM &#39;lisi&#39;@&#39;%&#39;;</span><br></pre></td></tr></table></figure>


<h2 id="MySQL约束"><a href="#MySQL约束" class="headerlink" title="MySQL约束"></a>MySQL约束</h2><p>概念： 对表中的<strong>数据</strong>进行限定，保证数据的正确性、有效性和完整性。    </p>
<p>分类：</p>
<ul>
<li>主键约束：primary key</li>
<li>非空约束：not null</li>
<li>唯一约束：unique</li>
<li>外键约束：foreign key</li>
</ul>
<h3 id="非空约束"><a href="#非空约束" class="headerlink" title="非空约束"></a>非空约束</h3><p>含义：not null，某一列的值不能为null</p>
<ul>
<li>创建表时添加约束<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE stu(</span><br><span class="line">	id INT,</span><br><span class="line">	NAME VARCHAR(20) NOT NULL -- name位为空</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li>
<li>创建表完后，添加非空约束<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stu MODIFY NAME VARCHAR(20) NOT NULL;</span><br></pre></td></tr></table></figure></li>
<li>删除name的非空约束<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stu MODIFY NAME VARCHAR(20);</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="唯一约束"><a href="#唯一约束" class="headerlink" title="唯一约束"></a>唯一约束</h3><p>含义：unique，某一列的值不能重复</p>
<p><strong>注意：唯一约束可以有NULL值，但是只能有一条记录为null</strong></p>
<p>在创建表时，添加唯一约束</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE stu(</span><br><span class="line">    id INT,</span><br><span class="line">    phone_number VARCHAR(20) UNIQUE -- 手机号</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>删除唯一约束</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 错误</span><br><span class="line">ALTER TABLE stu MODIFY phone_number VARCHAR(20);</span><br><span class="line"></span><br><span class="line">-- 正确</span><br><span class="line">ALTER TABLE stu DROP INDEX phone_number;</span><br></pre></td></tr></table></figure>

<p>在表创建完后，添加唯一约束</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stu MODIFY phone_number VARCHAR(20) UNIQUE;</span><br></pre></td></tr></table></figure>

<h3 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束</h3><h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><p>primary key。含义：非空且唯一</p>
<p><strong>注意：</strong></p>
<ul>
<li>一张表只能有一个字段为主键</li>
<li>主键就是表中记录的<strong>唯一标识</strong></li>
</ul>
<p>在创建表时，添加主键约束</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table stu(</span><br><span class="line">    id int primary key,-- 给id添加主键约束</span><br><span class="line">    name varchar(20)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>删除主键</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 错误 </span><br><span class="line">alter table stu modify id int ;</span><br><span class="line"></span><br><span class="line">-- 正确</span><br><span class="line">ALTER TABLE stu DROP PRIMARY KEY;</span><br></pre></td></tr></table></figure>

<p>创建完表后，添加主键</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stu MODIFY id INT PRIMARY KEY;</span><br></pre></td></tr></table></figure>

<h4 id="自动增长"><a href="#自动增长" class="headerlink" title="自动增长"></a>自动增长</h4><p>概念：如果某一列是数值类型的，使用 auto_increment 可以来完成值得自动增长在创建表时，添加主键约束，并且完成主键自增长。</p>
<p><strong>注意：主键增长只与上一条记录的主键值有关。一般和主键一起使用</strong>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create table stu(</span><br><span class="line">    id int primary key auto_increment, -- 给id添加主键约束</span><br><span class="line">    name varchar(20)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>删除自动增长</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stu MODIFY id INT;</span><br></pre></td></tr></table></figure>

<p>添加自动增长</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE stu MODIFY id INT AUTO_INCREMENT;</span><br></pre></td></tr></table></figure>

<h3 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h3><h4 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h4><p>foreign key：让<strong>表于表</strong>产生关系，从而保证数据的正确性。</p>
<p>在创建表时，可以添加外键</p>
<p>语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create table 表名(</span><br><span class="line">    -- 添加一些字段</span><br><span class="line">    ....</span><br><span class="line">    </span><br><span class="line">    -- 外键列 constraint表示约束的意思</span><br><span class="line">    -- 一般主表列名称为主键名称</span><br><span class="line">    constraint 外键名称 foreign key (外键列名称) references 主表名称(主表列名称)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>删除外键</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 DROP FOREIGN KEY 外键名称;</span><br></pre></td></tr></table></figure>

<p>创建表之后，添加外键</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段名称) REFERENCES 主表名称(主表列名称);</span><br></pre></td></tr></table></figure>

<h4 id="级联操作"><a href="#级联操作" class="headerlink" title="级联操作"></a>级联操作</h4><p>添加级联操作：</p>
<ul>
<li>级联更新：ON UPDATE CASCADE。</li>
<li>级联删除：ON DELETE CASCADE。</li>
<li>级联更新和删除可以添加一个或两个。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段名称) REFERENCES 主表名称(主表列名称) </span><br><span class="line">ON UPDATE CASCADE ON DELETE CASCADE;</span><br></pre></td></tr></table></figure>

<p><strong>注意：使用级联操作时，要格外注意。</strong></p>
<h2 id="数据库的设计"><a href="#数据库的设计" class="headerlink" title="数据库的设计"></a>数据库的设计</h2><h3 id="多表之间的关系"><a href="#多表之间的关系" class="headerlink" title="多表之间的关系"></a>多表之间的关系</h3><h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><p>一对一(了解)：如，人和身份证。<br>分析：一个人只有一个身份证，一个身份证只能对应一个人。</p>
<p>实现方式：一对一关系实现，可以在任意一方添加<strong>唯一外键(使用unique)</strong>指向另一方的主键。<strong>一般情况下合成一张表就可以了。</strong></p>
<p><img src="/images/MySQL%E5%AD%A6%E4%B9%A0/Snipaste_2020-02-25_12-36-45.png" alt=""></p>
<p><strong>一对多</strong>(多对一)：如，部门和员工。<br>分析：一个部门有多个员工，一个员工只能对应一个部门。</p>
<p>实现方式：<strong>在多的一方建立外键</strong>，指向一的一方的主键。</p>
<p><img src="/images/MySQL%E5%AD%A6%E4%B9%A0/Snipaste_2020-02-25_12-36-34.png" alt=""></p>
<p><strong>多对多</strong>：如，学生和课程<br>分析：一个学生可以选择很多门课程，一个课程也可以被很多学生选择。</p>
<p>实现方式：多对多关系实现需要借助第三张中间表。中间表至少包含两个字段，这两个字段作为第三张表的外键，分别指向两张表的主键。</p>
<p><img src="/images/MySQL%E5%AD%A6%E4%B9%A0/Snipaste_2020-02-25_12-36-23.png" alt=""></p>
<h4 id="多表关系案例"><a href="#多表关系案例" class="headerlink" title="多表关系案例"></a>多表关系案例</h4><p>创建旅游线路分类表 tab_category。一个分类对应多个线路。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- cid 旅游线路分类主键，自动增长</span><br><span class="line">-- cname 旅游线路分类名称非空，唯一，字符串 100</span><br><span class="line"></span><br><span class="line">CREATE TABLE tab_category (</span><br><span class="line">    cid INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">    cname VARCHAR(100) NOT NULL UNIQUE</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>创建旅游线路表 tab_route。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tab_route(</span><br><span class="line">	&#x2F;*</span><br><span class="line">    rid 旅游线路主键，自动增长</span><br><span class="line">    rname 旅游线路名称非空，唯一，字符串 100</span><br><span class="line">    price 价格</span><br><span class="line">    rdate 上架时间，日期类型</span><br><span class="line">    cid 外键，所属分类</span><br><span class="line">	*&#x2F;</span><br><span class="line">	</span><br><span class="line">    rid INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">    rname VARCHAR(100) NOT NULL UNIQUE,</span><br><span class="line">    price DOUBLE,</span><br><span class="line">    rdate DATE,</span><br><span class="line">    cid INT,</span><br><span class="line">    </span><br><span class="line">    -- 可以省略constraint和外键名称，系统会自动分配一个名称。</span><br><span class="line">    FOREIGN KEY (cid) REFERENCES tab_category(cid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">创建用户表 tab_user。线路和用户的关系为多对多，因此需要一个中间表记录二者的主键，我们设置为收藏表。</span><br><span class="line"></span><br><span class="line">​&#96;&#96;&#96;mysql</span><br><span class="line">CREATE TABLE tab_user (</span><br><span class="line">    &#x2F;*</span><br><span class="line">    uid 用户主键，自增长</span><br><span class="line">    username 用户名长度 100，唯一，非空</span><br><span class="line">    password 密码长度 30，非空</span><br><span class="line">    name 真实姓名长度 100</span><br><span class="line">    birthday 生日</span><br><span class="line">    sex 性别，定长字符串 1</span><br><span class="line">    telephone 手机号，字符串 11</span><br><span class="line">    email 邮箱，字符串长度 100</span><br><span class="line">    *&#x2F;</span><br><span class="line">    </span><br><span class="line">    uid INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">    username VARCHAR(100) UNIQUE NOT NULL,</span><br><span class="line">    PASSWORD VARCHAR(30) NOT NULL,</span><br><span class="line">    NAME VARCHAR(100),</span><br><span class="line">    birthday DATE,</span><br><span class="line">    sex CHAR(1) DEFAULT &#39;男&#39;,</span><br><span class="line">    telephone VARCHAR(11),</span><br><span class="line">    email VARCHAR(100)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>创建收藏表 tab_favorite，即线路和用户的中间表。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE tab_favorite (</span><br><span class="line">	&#x2F;*</span><br><span class="line">    rid 旅游线路 id，外键</span><br><span class="line">    date 收藏时间</span><br><span class="line">    uid 用户 id，外键</span><br><span class="line">    rid 和 uid 不能重复，设置复合主键，同一个用户不能收藏同一个线路两次</span><br><span class="line">    *&#x2F;</span><br><span class="line">    </span><br><span class="line">    rid INT, -- 线路id</span><br><span class="line">    DATE DATETIME,</span><br><span class="line">    uid INT, -- 用户id</span><br><span class="line">    -- 创建复合主键</span><br><span class="line">    PRIMARY KEY(rid,uid), -- 联合主键，二者联合起来作为收藏表的主键</span><br><span class="line">    FOREIGN KEY (rid) REFERENCES tab_route(rid),</span><br><span class="line">    FOREIGN KEY(uid) REFERENCES tab_user(uid)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>


<h3 id="数据库设计的范式"><a href="#数据库设计的范式" class="headerlink" title="数据库设计的范式"></a>数据库设计的范式</h3><p>概念：设计数据库时，需要遵循的一些规范。<strong>要遵循后边的范式要求，必须先遵循前边的所有范式要求</strong>，设计关系数据库时，遵从不同的规范要求，设计出合理的关系型数据库，这些不同的规范要求被称为不同的范式，各种范式呈递次规范，<strong>越高的范式数据库冗余越小</strong>。目前关系数据库有六种范式：第一范式（1NF）、第二范式（2NF）、第三范式（3NF）、巴斯-科德范式（BCNF）、第四范式(4NF）和第五范式（5NF，又称完美范式）。<strong>一般开发中，只需要达到第三范式即可。</strong></p>
<h4 id="相关概念"><a href="#相关概念" class="headerlink" title="相关概念"></a>相关概念</h4><ul>
<li><p>函数依赖：A–&gt;B,如果通过A属性(属性组)的值，可以确定唯一B属性的值。则称B依赖于A。例如：学号–&gt;姓名。（学号，课程名称） –&gt; 分数。</p>
</li>
<li><p>完全函数依赖：A–&gt;B，A依赖于B。如果A是一个<strong>属性组</strong>，则B属性值得确定需要依赖于A属性组中<strong>所有</strong>的属性值。例如：（学号，课程名称） –&gt; 分数。</p>
</li>
<li><p>部分函数依赖：A–&gt;B，如果A是一个<strong>属性组</strong>，则B属性值得确定只需要依赖于A属性组中<strong>某一些值</strong>即可。例如：（学号，课程名称） – &gt; 姓名。</p>
</li>
<li><p>传递函数依赖：A–&gt;B, B – &gt;C . 如果通过A属性(属性组)的值，可以确定唯一B属性的值，在通过B属性（属性组）的值可以确定唯一C属性的值，则称C传递函数依赖于A。例如：学号–&gt;系名，系名–&gt;系主任</p>
</li>
<li><p>码：如果在一张表中，一个属性或属性组，被其他所有属性所完全依赖，则称这个属性(属性组)为该表的码。例如：该表中码为：（学号，课程名称）。</p>
</li>
<li><p>主属性：码属性组中的所有属性</p>
</li>
<li><p>非主属性：除过码属性组的属性</p>
</li>
</ul>
<h4 id="分类-1"><a href="#分类-1" class="headerlink" title="分类"></a>分类</h4><p>第一范式（1NF）：每一列都是不可分割的原子数据项。<br>第二范式（2NF）：在1NF的基础上，非码属性必须完全依赖于码（在1NF基础上<strong>消除非主属性对主码的部分函数依赖</strong>）。<strong>可以通过表的拆分来实现</strong>。<br>第三范式（3NF）：在2NF基础上，任何非主属性不依赖于其它非主属性（在2NF基础上<strong>消除传递依赖</strong>）。<strong>可以通过表的拆分来实现</strong>。</p>
<h2 id="数据库的备份和还原"><a href="#数据库的备份和还原" class="headerlink" title="数据库的备份和还原"></a>数据库的备份和还原</h2><p><code>本质上是对sql语句的备份和还原。</code></p>
<h3 id="使用命令行"><a href="#使用命令行" class="headerlink" title="使用命令行"></a>使用命令行</h3><h4 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqldump -u用户名 -p密码 数据库名称 &gt; 保存的路径</span><br></pre></td></tr></table></figure>

<h4 id="还原"><a href="#还原" class="headerlink" title="还原"></a>还原</h4><ol>
<li>登录数据库</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u用户名 -p密码</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>创建数据库</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">create database 数据库名称;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>使用数据库</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use 数据库名称;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>执行文件。</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 例如 source sql </span><br><span class="line">source sql文件路径</span><br></pre></td></tr></table></figure>



<h3 id="使用图形化工具SQLyog"><a href="#使用图形化工具SQLyog" class="headerlink" title="使用图形化工具SQLyog"></a>使用图形化工具SQLyog</h3><h4 id="备份-1"><a href="#备份-1" class="headerlink" title="备份"></a>备份</h4><ol>
<li><p>选中数据库，右键 ”备份/导出”。</p>
<p><img src="/images/MySQL%E5%AD%A6%E4%B9%A0/Snipaste_2020-02-25_12-24-19.png" alt=""></p>
</li>
<li><p>指定导出路径，保存成.sql 文件即可。</p>
</li>
</ol>
<p><img src="/images/MySQL%E5%AD%A6%E4%B9%A0/Snipaste_2020-02-25_12-24-30.png" alt=""></p>
<h4 id="还原-1"><a href="#还原-1" class="headerlink" title="还原"></a>还原</h4><p>数据库列表区域右键“执行 SQL 脚本”， 指定要执行的 SQL 文件，执行即可</p>
<p><img src="/images/MySQL%E5%AD%A6%E4%B9%A0/Snipaste_2020-02-25_12-26-07.png" alt=""></p>
<p><img src="/images/MySQL%E5%AD%A6%E4%B9%A0/Snipaste_2020-02-25_12-26-19.png" alt=""></p>
<h2 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h2><p>查询语法：<br>    select<br>        列名列表<br>    from<br>        表名列表<br>    where….</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># 创建部门表</span><br><span class="line">CREATE TABLE dept(</span><br><span class="line">	id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">	NAME VARCHAR(20)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">INSERT INTO dept (NAME) VALUES (&#39;开发部&#39;),(&#39;市场部&#39;),(&#39;财务部&#39;);</span><br><span class="line"></span><br><span class="line"># 创建员工表</span><br><span class="line">CREATE TABLE emp (</span><br><span class="line">	id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">	NAME VARCHAR(10),</span><br><span class="line">	gender CHAR(1), -- 性别</span><br><span class="line">	salary DOUBLE, -- 工资</span><br><span class="line">	join_date DATE, -- 入职日期</span><br><span class="line">	dept_id INT,</span><br><span class="line">	FOREIGN KEY (dept_id) REFERENCES dept(id) -- 外键，关联部门表(部门表的主键)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">INSERT INTO emp(NAME,gender,salary,join_date,dept_id) VALUES(&#39;孙悟空&#39;,&#39;男&#39;,7200,&#39;2013-02-24&#39;,1);</span><br><span class="line">INSERT INTO emp(NAME,gender,salary,join_date,dept_id) VALUES(&#39;猪八戒&#39;,&#39;男&#39;,3600,&#39;2010-12-02&#39;,2);</span><br><span class="line">INSERT INTO emp(NAME,gender,salary,join_date,dept_id) VALUES(&#39;唐僧&#39;,&#39;男&#39;,9000,&#39;2008-08-08&#39;,2);</span><br><span class="line">INSERT INTO emp(NAME,gender,salary,join_date,dept_id) VALUES(&#39;白骨精&#39;,&#39;女&#39;,5000,&#39;2015-10-07&#39;,3);</span><br><span class="line">INSERT INTO emp(NAME,gender,salary,join_date,dept_id) VALUES(&#39;蜘蛛精&#39;,&#39;女&#39;,4500,&#39;2011-03-14&#39;,1);</span><br></pre></td></tr></table></figure>

<p>笛卡尔积：有两个集合A,B .取这两个集合的所有组成情况。<strong>要完成多表查询，需要消除无用的数据</strong>。</p>
<h3 id="内连接查询"><a href="#内连接查询" class="headerlink" title="内连接查询"></a>内连接查询</h3><h4 id="隐式内连接"><a href="#隐式内连接" class="headerlink" title="隐式内连接"></a>隐式内连接</h4><p>使用where条件消除无用数据。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">-- 查询所有员工信息和对应的部门信息。这里的引号可加可不加</span><br><span class="line">SELECT * FROM emp,dept WHERE emp.&#96;dept_id&#96; &#x3D; dept.&#96;id&#96;;</span><br><span class="line">				</span><br><span class="line">-- 查询员工表的名称，性别。部门表的名称</span><br><span class="line">SELECT emp.name,emp.gender,dept.name FROM emp,dept WHERE emp.&#96;dept_id&#96; &#x3D; dept.&#96;id&#96;;</span><br><span class="line"></span><br><span class="line">&#x2F;* 更为清楚的表示方式，先写出框架</span><br><span class="line">	SELECT</span><br><span class="line">		列名1，</span><br><span class="line">		列名2，</span><br><span class="line">		...</span><br><span class="line">	FROM</span><br><span class="line">		表名1，</span><br><span class="line">        表名2，</span><br><span class="line">        ...</span><br><span class="line">	WHERE</span><br><span class="line">		条件1，</span><br><span class="line">		条件2，</span><br><span class="line">		...;</span><br><span class="line">	然后写出FROM中的内容，利用起别名来简化操作，</span><br><span class="line">	接着再补上WHERE和SELECT的内容</span><br><span class="line">	记得语句末尾要加上分号</span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT</span><br><span class="line">	t1.&#96;NAME&#96;,</span><br><span class="line">    t1.&#96;gender&#96;,</span><br><span class="line">    t2.&#96;NAME&#96;</span><br><span class="line">FROM</span><br><span class="line">	emp t1,</span><br><span class="line">    dept t2</span><br><span class="line">WHERE</span><br><span class="line">	t1.&#96;dept_id&#96; &#x3D; t2.&#96;id&#96;;</span><br></pre></td></tr></table></figure>

<h4 id="显式内连接"><a href="#显式内连接" class="headerlink" title="显式内连接"></a>显式内连接</h4><p>语法： select 字段列表 from 表名1 [inner] join 表名2 on 条件；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- INNER可以省略，这里也可以使用起别名操作</span><br><span class="line"></span><br><span class="line">SELECT * FROM emp INNER JOIN dept ON emp.&#96;dept_id&#96; &#x3D; dept.&#96;id&#96;;	</span><br><span class="line">SELECT * FROM emp JOIN dept ON emp.&#96;dept_id&#96; &#x3D; dept.&#96;id&#96;;</span><br></pre></td></tr></table></figure>
<p>内连接查询：</p>
<ul>
<li>从哪些表中查询数据</li>
<li>条件是什么</li>
<li>查询哪些字段</li>
<li>相对于外链接，内连接查询的仅仅是交集部分，emp.<code>dept_id</code> = dept.<code>id</code>的那部分。</li>
</ul>
<h3 id="外连接查询"><a href="#外连接查询" class="headerlink" title="外连接查询"></a>外连接查询</h3><h4 id="左外连接"><a href="#左外连接" class="headerlink" title="左外连接"></a>左外连接</h4><p>语法：select 字段列表 from 表1 left [outer] join 表2 on 条件；<br>查询的是<strong>左表所有数据</strong>以及<strong>其交集</strong>部分。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-- 这里仅仅是把内连接的INNER替换成了LEFT</span><br><span class="line">SELECT</span><br><span class="line">	t1.*,</span><br><span class="line">	t2.&#96;NAME&#96;</span><br><span class="line">FROM </span><br><span class="line">	emp t1 LEFT JOIN dept t2</span><br><span class="line">ON</span><br><span class="line">	t1.&#96;dept_id&#96; &#x3D; t2.&#96;id&#96;;</span><br></pre></td></tr></table></figure>

<h4 id="右外连接"><a href="#右外连接" class="headerlink" title="右外连接"></a>右外连接</h4><p>语法：select 字段列表 from 表1 right [outer] join 表2 on 条件；<br>查询的是<strong>右表所有数据</strong>以及其<strong>交集</strong>部分。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	t1.*,</span><br><span class="line">	t2.&#96;NAME&#96;</span><br><span class="line">FROM </span><br><span class="line">	emp t1 RIGHT JOIN dept t2</span><br><span class="line">ON</span><br><span class="line">	t1.&#96;dept_id&#96; &#x3D; t2.&#96;id&#96;;</span><br></pre></td></tr></table></figure>

<h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><p>概念：查询中嵌套查询，称嵌套查询为子查询。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">-- 查询工资最高的员工信息</span><br><span class="line">-- 1 查询最高的工资是多少 9000</span><br><span class="line">SELECT MAX(salary) FROM emp;</span><br><span class="line"></span><br><span class="line">-- 2 查询员工信息，并且工资等于9000的</span><br><span class="line">SELECT * FROM emp WHERE emp.&#96;salary&#96; &#x3D; 9000;</span><br><span class="line"></span><br><span class="line">-- 一条sql就完成这个操作。称第二个SELECT为子查询</span><br><span class="line">SELECT * FROM emp WHERE emp.&#96;salary&#96; &#x3D; (SELECT MAX(salary) FROM emp);</span><br></pre></td></tr></table></figure>

<h4 id="子查询的结果是单行单列"><a href="#子查询的结果是单行单列" class="headerlink" title="子查询的结果是单行单列"></a>子查询的结果是单行单列</h4><ul>
<li>子查询可以作为条件，使用运算符去判断。 </li>
<li>运算符： &gt; &gt;= &lt; &lt;= =等</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 查询员工工资小于平均工资的员工信息</span><br><span class="line">SELECT * FROM emp WHERE emp.salary &lt; (SELECT AVG(salary) FROM emp);</span><br></pre></td></tr></table></figure>

<h4 id="子查询的结果是多行单列"><a href="#子查询的结果是多行单列" class="headerlink" title="子查询的结果是多行单列"></a>子查询的结果是多行单列</h4><p>子查询可以作为条件，使用运算符<code>in</code>来判断。</p>
<p>例如：需求为查询’财务部’和’市场部’所有的员工信息</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-- 第一步查询两个部门的id</span><br><span class="line">SELECT id FROM dept WHERE NAME &#x3D; &#39;财务部&#39; OR NAME &#x3D; &#39;市场部&#39;;</span><br><span class="line"></span><br><span class="line">-- 第二部查询部门id对应的员工信息</span><br><span class="line">-- 等价于SELECT * FROM emp WHERE dept_id IN (3, 2);</span><br><span class="line">SELECT * FROM emp WHERE dept_id &#x3D; 3 OR dept_id &#x3D; 2;</span><br></pre></td></tr></table></figure>

<p>使用子查询：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 子查询1</span><br><span class="line">SELECT * FROM emp WHERE dept_id IN (SELECT id FROM dept WHERE NAME &#x3D; &#39;财务部&#39; OR NAME &#x3D; &#39;市场部&#39;);</span><br><span class="line"></span><br><span class="line">-- 子查询2</span><br><span class="line">SELECT * FROM emp WHERE dept_id IN (SELECT id FROM dept WHERE NAME in (&#39;财务部&#39;, &#39;市场部&#39;));</span><br></pre></td></tr></table></figure>

<h4 id="子查询的结果是多行多列"><a href="#子查询的结果是多行多列" class="headerlink" title="子查询的结果是多行多列"></a>子查询的结果是多行多列</h4><p>子查询可以作为一张虚拟表参与查询。</p>
<p>例如：需求为查询员工入职日期是2011-11-11日之后的员工信息和部门信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;* 子查询</span><br><span class="line">   SELECT * FROM emp WHERE emp.&#96;join_date&#96; &gt; &#39;2011-11-11&#39;查询出      员工入职日期是2011-11-11日之后的员工信息</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">SELECT * FROM dept t1 ,(SELECT * FROM emp WHERE emp.&#96;join_date&#96; &gt; &#39;2011-11-11&#39;) t2 WHERE t1.id &#x3D; t2.dept_id;</span><br><span class="line"></span><br><span class="line">-- 普通内连接，更好理解一点</span><br><span class="line">SELECT * FROM emp t1,dept t2 WHERE t1.&#96;dept_id&#96; &#x3D; t2.&#96;id&#96; AND t1.&#96;join_date&#96; &gt;  &#39;2011-11-11&#39;；</span><br></pre></td></tr></table></figure>

<h3 id="多表查询练习"><a href="#多表查询练习" class="headerlink" title="多表查询练习"></a>多表查询练习</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line">-- 部门表</span><br><span class="line">CREATE TABLE dept (</span><br><span class="line">	id INT PRIMARY KEY PRIMARY KEY, -- 部门id</span><br><span class="line">	dname VARCHAR(50), -- 部门名称</span><br><span class="line">	loc VARCHAR(50) -- 部门所在地</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 添加4个部门</span><br><span class="line">INSERT INTO dept(id,dname,loc) VALUES </span><br><span class="line">(10,&#39;教研部&#39;,&#39;北京&#39;),</span><br><span class="line">(20,&#39;学工部&#39;,&#39;上海&#39;),</span><br><span class="line">(30,&#39;销售部&#39;,&#39;广州&#39;),</span><br><span class="line">(40,&#39;财务部&#39;,&#39;深圳&#39;);</span><br><span class="line">					</span><br><span class="line">                    </span><br><span class="line">-- 职务表，职务名称，职务描述</span><br><span class="line">CREATE TABLE job (</span><br><span class="line">	id INT PRIMARY KEY,</span><br><span class="line">	jname VARCHAR(20),</span><br><span class="line">	description VARCHAR(50)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 添加4个职务</span><br><span class="line">INSERT INTO job (id, jname, description) VALUES</span><br><span class="line">(1, &#39;董事长&#39;, &#39;管理整个公司，接单&#39;),</span><br><span class="line">(2, &#39;经理&#39;, &#39;管理部门员工&#39;),</span><br><span class="line">(3, &#39;销售员&#39;, &#39;向客人推销产品&#39;),</span><br><span class="line">(4, &#39;文员&#39;, &#39;使用办公软件&#39;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 员工表</span><br><span class="line">CREATE TABLE emp (</span><br><span class="line">	id INT PRIMARY KEY, -- 员工id</span><br><span class="line">	ename VARCHAR(50), -- 员工姓名</span><br><span class="line">	job_id INT, -- 职务id</span><br><span class="line">	mgr INT , -- 上级领导</span><br><span class="line">	joindate DATE, -- 入职日期</span><br><span class="line">	salary DECIMAL(7,2), -- 工资</span><br><span class="line">	bonus DECIMAL(7,2), -- 奖金</span><br><span class="line">	dept_id INT, -- 所在部门编号</span><br><span class="line">	CONSTRAINT emp_jobid_ref_job_id_fk FOREIGN KEY (job_id) REFERENCES job (id),</span><br><span class="line">	CONSTRAINT emp_deptid_ref_dept_id_fk FOREIGN KEY (dept_id) REFERENCES dept (id)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 添加员工</span><br><span class="line">INSERT INTO emp(id,ename,job_id,mgr,joindate,salary,bonus,dept_id) VALUES </span><br><span class="line">(1001,&#39;孙悟空&#39;,4,1004,&#39;2000-12-17&#39;,&#39;8000.00&#39;,NULL,20),</span><br><span class="line">(1002,&#39;卢俊义&#39;,3,1006,&#39;2001-02-20&#39;,&#39;16000.00&#39;,&#39;3000.00&#39;,30),</span><br><span class="line">(1003,&#39;林冲&#39;,3,1006,&#39;2001-02-22&#39;,&#39;12500.00&#39;,&#39;5000.00&#39;,30),</span><br><span class="line">(1004,&#39;唐僧&#39;,2,1009,&#39;2001-04-02&#39;,&#39;29750.00&#39;,NULL,20),</span><br><span class="line">(1005,&#39;李逵&#39;,4,1006,&#39;2001-09-28&#39;,&#39;12500.00&#39;,&#39;14000.00&#39;,30),</span><br><span class="line">(1006,&#39;宋江&#39;,2,1009,&#39;2001-05-01&#39;,&#39;28500.00&#39;,NULL,30),</span><br><span class="line">(1007,&#39;刘备&#39;,2,1009,&#39;2001-09-01&#39;,&#39;24500.00&#39;,NULL,10),</span><br><span class="line">(1008,&#39;猪八戒&#39;,4,1004,&#39;2007-04-19&#39;,&#39;30000.00&#39;,NULL,20),</span><br><span class="line">(1009,&#39;罗贯中&#39;,1,NULL,&#39;2001-11-17&#39;,&#39;50000.00&#39;,NULL,10),</span><br><span class="line">(1010,&#39;吴用&#39;,3,1006,&#39;2001-09-08&#39;,&#39;15000.00&#39;,&#39;0.00&#39;,30),</span><br><span class="line">(1011,&#39;沙僧&#39;,4,1004,&#39;2007-05-23&#39;,&#39;11000.00&#39;,NULL,20),</span><br><span class="line">(1012,&#39;李逵&#39;,4,1006,&#39;2001-12-03&#39;,&#39;9500.00&#39;,NULL,30),</span><br><span class="line">(1013,&#39;小白龙&#39;,4,1004,&#39;2001-12-03&#39;,&#39;30000.00&#39;,NULL,20),</span><br><span class="line">(1014,&#39;关羽&#39;,4,1007,&#39;2002-01-23&#39;,&#39;13000.00&#39;,NULL,10);</span><br><span class="line"></span><br><span class="line">				</span><br><span class="line">-- 工资等级表</span><br><span class="line">CREATE TABLE salarygrade (</span><br><span class="line">	grade INT PRIMARY KEY,   -- 级别</span><br><span class="line">	losalary INT,  -- 最低工资</span><br><span class="line">	hisalary INT -- 最高工资</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 添加5个工资等级</span><br><span class="line">INSERT INTO salarygrade(grade,losalary,hisalary) VALUES </span><br><span class="line">(1,7000,12000),</span><br><span class="line">(2,12010,14000),</span><br><span class="line">(3,14010,20000),</span><br><span class="line">(4,20010,30000),</span><br><span class="line">(5,30010,99990);</span><br></pre></td></tr></table></figure>

<p>1.查询所有员工信息。查询员工编号，员工姓名，工资，职务名称，职务描述。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">    分析：</span><br><span class="line">    1.员工编号，员工姓名，工资，需要查询emp表  职务名称，职务描述 需要查询job表</span><br><span class="line">    2.查询条件 emp.job_id &#x3D; job.id</span><br><span class="line">*&#x2F;</span><br><span class="line">select</span><br><span class="line">	t1.&#96;id&#96;,	-- 员工编号</span><br><span class="line">	t1.&#96;ename&#96;,	-- 员工姓名</span><br><span class="line">	t1.&#96;salary&#96;,	-- 工资</span><br><span class="line">	t2.&#96;jname&#96;,	-- 职务名称</span><br><span class="line">	t2.&#96;description&#96;-- 职务描述</span><br><span class="line">from</span><br><span class="line">	emp t1, </span><br><span class="line">	job t2</span><br><span class="line">where </span><br><span class="line">	t1.&#96;job_id&#96; &#x3D; t2.&#96;id&#96;;</span><br></pre></td></tr></table></figure>

<p>2.查询员工编号，员工姓名，工资，职务名称，职务描述，部门名称，部门位置。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">    分析：</span><br><span class="line">    1. 员工编号，员工姓名，工资 emp  职务名称，职务描述 job  部门名称，部门位置 dept</span><br><span class="line">    2. 条件： emp.job_id &#x3D; job.id and emp.dept_id &#x3D; dept.id</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">SELECT</span><br><span class="line">	t1.&#96;id&#96;,	-- 员工编号</span><br><span class="line">	t1.&#96;ename&#96;,	-- 员工姓名</span><br><span class="line">	t1.&#96;salary&#96;,	-- 工资</span><br><span class="line">	t2.&#96;jname&#96;,	-- 职务名称</span><br><span class="line">	t2.&#96;description&#96;,	-- 职务描述</span><br><span class="line">	t3.&#96;dname&#96;,	-- 部门名称</span><br><span class="line">	t3.&#96;loc&#96;	-- 部门位置</span><br><span class="line">FROM</span><br><span class="line">	emp t1,</span><br><span class="line">	job t2,</span><br><span class="line">	dept t3</span><br><span class="line">WHERE</span><br><span class="line">	t1.&#96;job_id&#96; &#x3D; t2.&#96;id&#96; AND t1.&#96;dept_id&#96; &#x3D; t3.&#96;id&#96;;</span><br></pre></td></tr></table></figure>

<p>3.查询员工姓名，工资，工资等级。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">    分析：</span><br><span class="line">    1.员工姓名，工资 emp  工资等级 salarygrade</span><br><span class="line">    2.条件 emp.salary &gt;&#x3D; salarygrade.losalary and emp.salary &lt;&#x3D; 			  salarygrade.hisalary</span><br><span class="line">    emp.salary BETWEEN salarygrade.losalary and salarygrade.hisalary</span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT </span><br><span class="line">	t1.&#96;ename&#96;,	-- 员工姓名</span><br><span class="line">	t1.&#96;salary&#96;,	-- 工资</span><br><span class="line">	t2.&#96;grade&#96;	-- 工资等级</span><br><span class="line">FROM</span><br><span class="line">	emp t1,</span><br><span class="line">	salarygrade t2</span><br><span class="line">WHERE</span><br><span class="line">	&#x2F;*</span><br><span class="line">		等价于</span><br><span class="line">		t1.&#96;salary&#96;BETWEEN t2.&#96;losalary&#96; AND t1.&#96;salary&#96; t2.&#96;hisalary&#96;</span><br><span class="line">	*&#x2F;</span><br><span class="line">	t1.&#96;salary&#96; &gt; t2.&#96;losalary&#96; AND t1.&#96;salary&#96; &lt; t2.&#96;hisalary&#96;</span><br></pre></td></tr></table></figure>

<p>4.查询员工姓名，工资，职务名称，职务描述，部门名称，部门位置，工资等级</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">    分析：</span><br><span class="line">    1. 员工姓名，工资 emp ， 职务名称，职务描述 job 部门名称，部门位置，dept  工资等级 salarygrade</span><br><span class="line">    2. 条件1:emp.job_id &#x3D; job.id </span><br><span class="line">       条件2：emp.dept_id &#x3D; dept.id </span><br><span class="line">       条件3：emp.salary BETWEEN salarygrade.losalary AND salarygrade.hisalary</span><br><span class="line">       三个条件用and连接</span><br><span class="line">*&#x2F;</span><br><span class="line">SELECT </span><br><span class="line">	t1.&#96;ename&#96;,</span><br><span class="line">	t1.&#96;salary&#96;,</span><br><span class="line">	t2.&#96;jname&#96;,</span><br><span class="line">	t2.&#96;description&#96;,</span><br><span class="line">	t3.&#96;dname&#96;,</span><br><span class="line">	t3.&#96;loc&#96;,</span><br><span class="line">	t4.&#96;grade&#96;</span><br><span class="line">FROM </span><br><span class="line">	emp t1,</span><br><span class="line">	job t2,</span><br><span class="line">	dept t3,</span><br><span class="line">	salarygrade t4</span><br><span class="line">WHERE </span><br><span class="line">	t1.&#96;job_id&#96; &#x3D; t2.&#96;id&#96; </span><br><span class="line">	AND t1.&#96;dept_id&#96; &#x3D; t3.&#96;id&#96;</span><br><span class="line">	AND t1.&#96;salary&#96; BETWEEN t4.&#96;losalary&#96; AND t4.&#96;hisalary&#96;;</span><br></pre></td></tr></table></figure>

<p>5.查询出部门编号、部门名称、部门位置、部门人数</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">	分析：</span><br><span class="line">	1.部门编号、部门名称、部门位置 dept 表。 部门人数 emp表</span><br><span class="line">	2.使用分组查询。按照emp.dept_id完成分组，查询count(id)</span><br><span class="line">	3.使用子查询将第2步的查询结果和dept表进行关联查询</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">SELECT </span><br><span class="line">	t1.&#96;id&#96;,</span><br><span class="line">	t1.&#96;dname&#96;,t1.&#96;loc&#96;,</span><br><span class="line">	t2.total</span><br><span class="line">FROM </span><br><span class="line">	dept t1,</span><br><span class="line">	</span><br><span class="line">	-- 实现第二步的效果，得出一张虚拟表</span><br><span class="line">	(SELECT</span><br><span class="line">		dept_id,</span><br><span class="line">		COUNT(id) total</span><br><span class="line">	FROM </span><br><span class="line">		emp</span><br><span class="line">	GROUP BY dept_id) t2</span><br><span class="line">WHERE </span><br><span class="line">	t1.&#96;id&#96; &#x3D; t2.dept_id;</span><br></pre></td></tr></table></figure>

<p>6.查询所有员工的姓名及其直接上级的姓名,<strong>没有领导的员工也需要查询</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;*</span><br><span class="line">	分析：</span><br><span class="line">	1.姓名 emp， 直接上级的姓名 emp</span><br><span class="line">	* emp表的id 和 mgr 是自关联</span><br><span class="line">	2.条件 emp.id &#x3D; emp.mgr</span><br><span class="line">	3.查询左表的所有数据，和 交集数据。使用左外连接查询</span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 不包含没有领导的员工</span><br><span class="line">&#x2F;*	</span><br><span class="line">	select</span><br><span class="line">	t1.ename,</span><br><span class="line">	t1.mgr,</span><br><span class="line">	t2.&#96;id&#96;,</span><br><span class="line">	t2.ename</span><br><span class="line">	from emp t1, emp t2</span><br><span class="line">	where t1.mgr &#x3D; t2.&#96;id&#96;;</span><br><span class="line"></span><br><span class="line">*&#x2F;</span><br><span class="line"></span><br><span class="line">-- 使用左外连接</span><br><span class="line">SELECT </span><br><span class="line">	t1.ename,</span><br><span class="line">	t1.mgr,</span><br><span class="line">	t2.&#96;id&#96;,</span><br><span class="line">	t2.&#96;ename&#96;</span><br><span class="line">FROM emp t1</span><br><span class="line">LEFT JOIN emp t2</span><br><span class="line">ON t1.&#96;mgr&#96; &#x3D; t2.&#96;id&#96;;</span><br></pre></td></tr></table></figure>



<h2 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h2><h3 id="事务的基本介绍"><a href="#事务的基本介绍" class="headerlink" title="事务的基本介绍"></a>事务的基本介绍</h3><ol>
<li><p>概念</p>
<p>如果一个包含多个步骤的业务操作，被事务管理，那么这些操作要么同时成功，要么同时失败。    </p>
</li>
<li><p>操作</p>
</li>
</ol>
<ul>
<li>开启事务： start transaction;</li>
<li>回滚：rollback;</li>
<li>提交：commit;</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">-- 创建一个账户表</span><br><span class="line">CREATE TABLE account (</span><br><span class="line">    id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">    NAME VARCHAR(10),</span><br><span class="line">    balance DOUBLE</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">-- 添加数据</span><br><span class="line">INSERT INTO account (NAME, balance) VALUES (&#39;zhangsan&#39;, 1000), (&#39;lisi&#39;, 1000);</span><br><span class="line"></span><br><span class="line">SELECT * FROM account;</span><br><span class="line">UPDATE account SET balance &#x3D; 1000;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">-- 张三给李四转账 500 元</span><br><span class="line"></span><br><span class="line">-- 0. 开启事务</span><br><span class="line">START TRANSACTION;</span><br><span class="line"></span><br><span class="line">-- 1. 张三账户 -500</span><br><span class="line">UPDATE account SET balance &#x3D; balance - 500 WHERE NAME &#x3D; &#39;zhangsan&#39;;</span><br><span class="line"></span><br><span class="line">-- 2. 李四账户 +500</span><br><span class="line">-- 出错了...</span><br><span class="line">UPDATE account SET balance &#x3D; balance + 500 WHERE NAME &#x3D; &#39;lisi&#39;;</span><br><span class="line"></span><br><span class="line">-- 发现执行没有问题，提交事务</span><br><span class="line">COMMIT;</span><br><span class="line"></span><br><span class="line">-- 发现出问题了，回滚事务</span><br><span class="line">ROLLBACK;</span><br></pre></td></tr></table></figure>

<p><strong>MySQL数据库中事务默认自动提交</strong></p>
<p>事务提交的两种方式：</p>
<ul>
<li>自动提交：mysql就是自动提交的。一条DML(增删改)语句会自动提交一次事务。<br>手动提交：Oracle 数据库默认是手动提交事务。在MySQL中如果手动开启事务，需要手动再提交。</li>
</ul>
<p>修改事务的默认提交方式：</p>
<ul>
<li>查看事务的默认提交方式：` 1 代表自动提交  0 代表手动提交。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SELECT @@autocommit;</span><br></pre></td></tr></table></figure>
<ul>
<li>修改默认提交方式： </li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set @@autocommit &#x3D; 0;</span><br></pre></td></tr></table></figure>

<p>事务的四大特征：</p>
<ol>
<li>原子性：是不可分割的最小操作单位，要么同时成功，要么同时失败。</li>
<li>持久性：当事务提交或回滚后，数据库会持久化的保存数据。</li>
<li>隔离性：多个事务之间相互独立。</li>
<li>一致性：事务操作前后，数据总量不变。</li>
</ol>
<h3 id="事务的隔离级别（了解）"><a href="#事务的隔离级别（了解）" class="headerlink" title="事务的隔离级别（了解）"></a>事务的隔离级别（了解）</h3><p>概念：多个事务之间隔离的，相互独立的。但是如果<strong>多个事务操作同一批数据</strong>，则会引发一些问题，设置不同的隔离级别就可以解决这些问题。</p>
<p>存在问题：</p>
<ul>
<li>脏读：一个事务，读取到另一个事务中没有提交的数据。</li>
<li>不可重复读(虚读)：在同一个事务中，两次读取到的数据不一样。</li>
<li>幻读：一个事务操作(DML)数据表中所有记录，另一个事务添加了一条数据，则第一个事务查询不到自己的修改。</li>
</ul>
<p>MySQL中隔离级别：</p>
<ol>
<li>read uncommitted：读未提交。产生的问题：脏读、不可重复读、幻读。</li>
<li>read committed：读已提交 （Oracle默认）。产生的问题：不可重复读、幻读。</li>
<li>repeatable read：可重复读 （MySQL默认）。产生的问题：幻读。</li>
<li>serializable：串行化。可以解决所有的问题。（类似于锁）</li>
</ol>
<p><strong>注意：隔离级别从小到大安全性越来越高，但是效率越来越低</strong></p>
<p>数据库查询隔离级别：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">select @@tx_isolation;</span><br></pre></td></tr></table></figure>

<p>数据库设置隔离级别：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set global transaction isolation level  级别字符串(以上四种);</span><br></pre></td></tr></table></figure>
    </div>

    
    
    
        <div class="reward-container">
  <div>坚持原创技术分享，您的支持将鼓励我继续创作！</div>
  <button onclick="var qr = document.getElementById('qr'); qr.style.display = (qr.style.display === 'none') ? 'block' : 'none';">
    打赏
  </button>
  <div id="qr" style="display: none;">
      
      <div style="display: inline-block;">
        <img src="/images/wechatpay.png" alt="Kaijie 微信支付">
        <p>微信支付</p>
      </div>
      
      <div style="display: inline-block;">
        <img src="/images/alipay.jpg" alt="Kaijie 支付宝">
        <p>支付宝</p>
      </div>

  </div>
</div>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Kaijie
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="http://kaijie.tech/2020/02/23/MySQL%E5%AD%A6%E4%B9%A0/" title="MySQL学习">http://kaijie.tech/2020/02/23/MySQL学习/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

      
      
      <div>
      
          <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>
      
      </div>
      
      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/MySQL%E5%9F%BA%E7%A1%80/" rel="tag"># MySQL基础</a>
              <a href="/tags/MySQL%E7%BA%A6%E6%9D%9F/" rel="tag"># MySQL约束</a>
              <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%AE%BE%E8%AE%A1/" rel="tag"># 数据库的设计</a>
              <a href="/tags/%E6%95%B0%E6%8D%AE%E7%9A%84%E5%A4%87%E4%BB%BD%E5%92%8C%E8%BF%98%E5%8E%9F/" rel="tag"># 数据的备份和还原</a>
              <a href="/tags/%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2/" rel="tag"># 多表查询</a>
              <a href="/tags/%E4%BA%8B%E5%8A%A1/" rel="tag"># 事务</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/02/21/jdk1.8%E3%80%81Maven3.6.3%E5%92%8Cidea2019.3%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B/" rel="prev" title="jdk1.8、Maven3.6.3和idea2019.3安装教程">
      <i class="fa fa-chevron-left"></i> jdk1.8、Maven3.6.3和idea2019.3安装教程
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/02/24/MySQL5-5-40%E5%92%8C%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B7%A5%E5%85%B7SQLyog%E7%9A%84%E5%AE%89%E8%A3%85%E5%8F%8A%E5%8D%B8%E8%BD%BD/" rel="next" title="MySQL5.5.40和可视化工具SQLyog的安装及卸载">
      MySQL5.5.40和可视化工具SQLyog的安装及卸载 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#数据库的基本概念"><span class="nav-number">1.</span> <span class="nav-text">数据库的基本概念</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL基础"><span class="nav-number">2.</span> <span class="nav-text">MySQL基础</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#DDL-操作数据库、表"><span class="nav-number">2.1.</span> <span class="nav-text">DDL:操作数据库、表</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#操作数据库"><span class="nav-number">2.1.1.</span> <span class="nav-text">操作数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#C-Create-创建"><span class="nav-number">2.1.1.1.</span> <span class="nav-text">C(Create):创建</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#D-Delete-删除"><span class="nav-number">2.1.1.2.</span> <span class="nav-text">D(Delete):删除</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#U-Update-修改"><span class="nav-number">2.1.1.3.</span> <span class="nav-text">U(Update):修改</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#R-Retrieve-查询"><span class="nav-number">2.1.1.4.</span> <span class="nav-text">R(Retrieve):查询</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#使用数据库"><span class="nav-number">2.1.1.5.</span> <span class="nav-text">使用数据库</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#操作表"><span class="nav-number">2.1.2.</span> <span class="nav-text">操作表</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#C-Create-创建表"><span class="nav-number">2.1.2.1.</span> <span class="nav-text">C(Create)创建表</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#D-Delete-删除-1"><span class="nav-number">2.1.2.2.</span> <span class="nav-text">D(Delete):删除</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#U-Update-修改-1"><span class="nav-number">2.1.2.3.</span> <span class="nav-text">U(Update):修改</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#R-Retrieve-查询-1"><span class="nav-number">2.1.2.4.</span> <span class="nav-text">R(Retrieve):查询</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DML：增删改表中的数据"><span class="nav-number">2.2.</span> <span class="nav-text">DML：增删改表中的数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#添加数据"><span class="nav-number">2.2.1.</span> <span class="nav-text">添加数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除数据"><span class="nav-number">2.2.2.</span> <span class="nav-text">删除数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修改数据"><span class="nav-number">2.2.3.</span> <span class="nav-text">修改数据</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DQL：查询表中的记录"><span class="nav-number">2.3.</span> <span class="nav-text">DQL：查询表中的记录</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#基础查询"><span class="nav-number">2.3.1.</span> <span class="nav-text">基础查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#条件查询"><span class="nav-number">2.3.2.</span> <span class="nav-text">条件查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#like关键字"><span class="nav-number">2.3.3.</span> <span class="nav-text">like关键字</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分组查询"><span class="nav-number">2.3.4.</span> <span class="nav-text">分组查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分页查询"><span class="nav-number">2.3.5.</span> <span class="nav-text">分页查询</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DCL：管理用户及授权"><span class="nav-number">2.4.</span> <span class="nav-text">DCL：管理用户及授权</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#管理用户"><span class="nav-number">2.4.1.</span> <span class="nav-text">管理用户</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Windows中mysql中忘记了root用户的密码"><span class="nav-number">2.4.2.</span> <span class="nav-text">Windows中mysql中忘记了root用户的密码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#权限管理"><span class="nav-number">2.4.3.</span> <span class="nav-text">权限管理</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MySQL约束"><span class="nav-number">3.</span> <span class="nav-text">MySQL约束</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#非空约束"><span class="nav-number">3.1.</span> <span class="nav-text">非空约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#唯一约束"><span class="nav-number">3.2.</span> <span class="nav-text">唯一约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#主键约束"><span class="nav-number">3.3.</span> <span class="nav-text">主键约束</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#语法"><span class="nav-number">3.3.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#自动增长"><span class="nav-number">3.3.2.</span> <span class="nav-text">自动增长</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#外键约束"><span class="nav-number">3.4.</span> <span class="nav-text">外键约束</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#语法-1"><span class="nav-number">3.4.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#级联操作"><span class="nav-number">3.4.2.</span> <span class="nav-text">级联操作</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据库的设计"><span class="nav-number">4.</span> <span class="nav-text">数据库的设计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#多表之间的关系"><span class="nav-number">4.1.</span> <span class="nav-text">多表之间的关系</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#分类"><span class="nav-number">4.1.1.</span> <span class="nav-text">分类</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#多表关系案例"><span class="nav-number">4.1.2.</span> <span class="nav-text">多表关系案例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数据库设计的范式"><span class="nav-number">4.2.</span> <span class="nav-text">数据库设计的范式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#相关概念"><span class="nav-number">4.2.1.</span> <span class="nav-text">相关概念</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分类-1"><span class="nav-number">4.2.2.</span> <span class="nav-text">分类</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据库的备份和还原"><span class="nav-number">5.</span> <span class="nav-text">数据库的备份和还原</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用命令行"><span class="nav-number">5.1.</span> <span class="nav-text">使用命令行</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#备份"><span class="nav-number">5.1.1.</span> <span class="nav-text">备份</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#还原"><span class="nav-number">5.1.2.</span> <span class="nav-text">还原</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用图形化工具SQLyog"><span class="nav-number">5.2.</span> <span class="nav-text">使用图形化工具SQLyog</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#备份-1"><span class="nav-number">5.2.1.</span> <span class="nav-text">备份</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#还原-1"><span class="nav-number">5.2.2.</span> <span class="nav-text">还原</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#多表查询"><span class="nav-number">6.</span> <span class="nav-text">多表查询</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#内连接查询"><span class="nav-number">6.1.</span> <span class="nav-text">内连接查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#隐式内连接"><span class="nav-number">6.1.1.</span> <span class="nav-text">隐式内连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#显式内连接"><span class="nav-number">6.1.2.</span> <span class="nav-text">显式内连接</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#外连接查询"><span class="nav-number">6.2.</span> <span class="nav-text">外连接查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#左外连接"><span class="nav-number">6.2.1.</span> <span class="nav-text">左外连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#右外连接"><span class="nav-number">6.2.2.</span> <span class="nav-text">右外连接</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#子查询"><span class="nav-number">6.3.</span> <span class="nav-text">子查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#子查询的结果是单行单列"><span class="nav-number">6.3.1.</span> <span class="nav-text">子查询的结果是单行单列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#子查询的结果是多行单列"><span class="nav-number">6.3.2.</span> <span class="nav-text">子查询的结果是多行单列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#子查询的结果是多行多列"><span class="nav-number">6.3.3.</span> <span class="nav-text">子查询的结果是多行多列</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多表查询练习"><span class="nav-number">6.4.</span> <span class="nav-text">多表查询练习</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#事务"><span class="nav-number">7.</span> <span class="nav-text">事务</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#事务的基本介绍"><span class="nav-number">7.1.</span> <span class="nav-text">事务的基本介绍</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#事务的隔离级别（了解）"><span class="nav-number">7.2.</span> <span class="nav-text">事务的隔离级别（了解）</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Kaijie"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Kaijie</p>
  <div class="site-description" itemprop="description">我的个人博客</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Kaijie234" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Kaijie234" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/abcgkj" title="CSDN → https:&#x2F;&#x2F;blog.csdn.net&#x2F;abcgkj" rel="noopener" target="_blank"><i class="fa fa-fw fa-crosshairs"></i>CSDN</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-Kaijie"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Kaijie</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    <span title="站点总字数">59k</span>
</div>



        
<div class="busuanzi-count">
  <script pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/pjax/pjax.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

  <script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.getAttribute('pjax') !== null) {
      script.setAttribute('pjax', '');
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script>




  




  
<script src="/js/local-search.js"></script>






  <script src="//code.tidio.co/elcqr6fmccxaskykzkijbidmst2hitdp.js"></script>







    <div id="pjax">
  

  
  <script src="//cdn.jsdelivr.net/npm/quicklink@1/dist/quicklink.umd.js"></script>
  <script>
      window.addEventListener('load', () => {
      quicklink({
        timeout: 3000,
        priority: true,
        ignores: [uri => uri.includes('#'),uri => uri == 'http://kaijie.tech/2020/02/23/MySQL%E5%AD%A6%E4%B9%A0/',]
      });
      });
  </script>


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'OyvjX30Pt7Ic5VkgR0zgQ0oa-gzGzoHsz',
      appKey     : 'Vle8KiqgjyplKXRV0GA9mi9o',
      placeholder: "Just go go",
      avatar     : 'mm',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

    </div>
</body>
</html>
